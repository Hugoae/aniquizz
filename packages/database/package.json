{
  "name": "@aniquizz/database",
  "version": "1.0.0",
  "description": "database/\r ├── prisma/\r │   ├── migrations/             <-- Historique des changements de la BDD (géré par Prisma)\r │   └── schema.prisma           <-- Le plan de la base de données (Tables, Relations, Enums)\r │\r ├── data/                       <-- Stockage des fichiers JSON (entrée/sortie des scripts)\r │   ├── .gitignore              <-- Ignore les gros fichiers générés, garde les fichiers manuels\r │   ├── manual_edits.json       <-- Les modifications manuelles (Titres, Tags, Locks) à préserver\r │   ├── data_step1.json         <-- Résultat temporaire du script 1\r │   └── data_step2.json         <-- Résultat temporaire du script 2\r │\r └── scripts/                    <-- Toute la logique du pipeline\r     │\r     │   // --- LE PIPELINE (Ordre d'exécution) ---\r     ├── 1_fetch_anilist.ts      <-- Étape 1 : Récupère les métadonnées (Titres, Genres, Popularité) depuis AniList\r     ├── 2_fetch_animethemes.ts  <-- Étape 2 : Trouve les vidéos (Openings/Endings) correspondantes sur AnimeThemes\r     ├── 3_load_initial_data.ts  <-- Étape 3 : Lit les JSONs de l'étape 1 & 2 et crée les entrées dans la BDD Postgres (Statut: PENDING)\r     ├── 4_sync_storage.ts       <-- Étape 4 : Le \"Worker\". Télécharge les MP4, les compresse et les envoie sur Supabase (relancer infiniment quand on a des erreurs de downloads)\r     │\r     │   // --- OUTILS DE GESTION (Pour modifier les données) ---\r     ├── export_db_to_json.ts    <-- Sauvegarde l'état actuel de la BDD dans 'data/manual_edits.json' pour pouvoir les éditer\r     ├── import_edits_to_db.ts   <-- Lit 'data/manual_edits.json' et met à jour la BDD (applique les renommages, tags, changement de difficulté, etc... .)\r     │\r     │   // --- ADMINISTRATION ---\r     ├── global_build.ts         <-- Le chef d'orchestre : Lance les scripts 1, 2, 3 et 4 à la suite automatiquement pour \"construire\" la base de données\r     ├── reset_all.ts            <-- Zone de danger : Vide la BDD, vide le Bucket Supabase et supprime les fichiers JSON locaux\r     └── seed_db.ts              <-- Remplit la BDD avec un jeu de données propre (utile pour remettre à zéro sans tout retélécharger)",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "build": "tsc",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.1.0",
    "@ffprobe-installer/ffprobe": "^2.1.2",
    "@prisma/client": "^6.19.2",
    "@supabase/supabase-js": "^2.93.1",
    "axios": "^1.13.3",
    "dotenv": "^17.2.3",
    "fluent-ffmpeg": "^2.1.3"
  },
  "devDependencies": {
    "@types/node": "^25.0.10",
    "prisma": "^6.19.2",
    "ts-node": "^10.9.2",
    "typescript": "^5.9.3"
  }
}
